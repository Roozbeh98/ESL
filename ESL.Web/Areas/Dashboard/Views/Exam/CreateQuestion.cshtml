@model ESL.Web.Areas.Dashboard.Models.ViewModels.Model_QuestionCreate
@using ESL.Services.BaseRepository

<script src="~/Scripts/Plugins/ckeditor/ckeditor.js"></script>
<script src="~/Scripts/Plugins/ckfinder/ckfinder.js"></script>

<link href="https://unpkg.com/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.min.css" rel="stylesheet" />
<link href="https://unpkg.com/filepond/dist/filepond.min.css" rel="stylesheet">
<link href="https://unpkg.com/filepond-plugin-file-poster/dist/filepond-plugin-file-poster.css" rel="stylesheet">

<style>

    .filepond--drop-label {
        color: #4c4e53;
    }

    .filepond--label-action {
        text-decoration-color: #babdc0;
    }

    .filepond--panel-root {
        border-radius: 2em;
        background-color: #edf0f4;
        height: 1em;
    }

    .filepond--item-panel {
        background-color: #595e68;
    }

    .filepond--drip-blob {
        background-color: #7f8a9a;
    }

</style>


@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    @Html.HiddenFor(model => model.ExamID)

    <div class="modal-main">

        <div class="form-group">
            @Html.LabelFor(model => model.Title, htmlAttributes: new { @class = "" })
            <div class="input-group">
                @Html.EditorFor(model => model.Title, new { htmlAttributes = new { @class = "form-control ckeditor" } })
            </div>
            @Html.ValidationMessageFor(model => model.Title, "", new { @class = "text-danger" })
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.Type, htmlAttributes: new { @class = "control-label " })
            @Html.DropDownListFor(model => model.Type, Rep_CodeGroup.Get_AllCodesWithGroupWithGUID(CodeGroup.QuestionType), new { @class = "form-control Select2_Normal" })
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.Group, htmlAttributes: new { @class = "control-label " })
            @Html.DropDownListFor(model => model.Group, Rep_CodeGroup.Get_AllCodesWithGroupWithGUID(CodeGroup.QuestionGroup), new { @class = "form-control Select2_Normal" })
        </div>

        <input type="file"
           class="filepond"
           name="filepond"
           multiple
           instant-upload
           data-max-file-size="3MB"
           data-max-files="3">

        <div class="form-group">
            @Html.LabelFor(model => model.Response, htmlAttributes: new { @class = "control-label " })
            @Html.DropDownListFor(model => model.Response, Rep_CodeGroup.Get_AllCodesWithGroupWithGUID(CodeGroup.QuestionOption), new { @class = "form-control Select2_Normal" })
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.Mark, htmlAttributes: new { @class = "control-label " })
            <div class="input-group">
                <span class=" input-group-addon"><i class="glyphicon glyphicon-pencil"></i></span>
                @Html.EditorFor(model => model.Mark, new { htmlAttributes = new { @class = "form-control" } })
            </div>
            @Html.ValidationMessageFor(model => model.Mark, "", new { @class = "text-danger" })
        </div>

    </div>

    <div class="" style="margin-top:20px;">
        <button class="btn btn-danger modal-btn-Dual pull-left" type="button" data-dismiss="modal">انصراف</button>
        <button class="btn btn-success modal-btn-Dual pull-right " type="submit" name="btn-Delete">تایید</button>
    </div>
}

<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
<script src="~/Scripts/Plugins/jQuery.Select2/select2.js"></script>
<script src="~/Scripts/Plugins/jQuery.Select2/i18n/fa.js"></script>

<script src="~/Scripts/MyScripts/Select2_Config.js"></script>

<script src="https://unpkg.com/filepond-plugin-file-encode/dist/filepond-plugin-file-encode.min.js"></script>
<script src="https://unpkg.com/filepond-plugin-file-validate-size/dist/filepond-plugin-file-validate-size.min.js"></script>
<script src="https://unpkg.com/filepond-plugin-image-exif-orientation/dist/filepond-plugin-image-exif-orientation.min.js"></script>
<script src="https://unpkg.com/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.min.js"></script>
<script src="https://unpkg.com/filepond/dist/filepond.min.js"></script>

<script>

    // We want to preview images, so we need to register the Image Preview plugin
    FilePond.registerPlugin(

        // encodes the file as base64 data
        FilePondPluginFileEncode,

        // validates the size of the file
        FilePondPluginFileValidateSize,

        // corrects mobile image orientation
        FilePondPluginImageExifOrientation,

        // previews dropped images
        FilePondPluginImagePreview,
    );

    // Select the file input and use create() to turn it into a pond
    FilePond.create(
        document.querySelector('.filepond')
    );

    FilePond.setOptions({
            server: {
                process: '@Url.Action("SaveFile", "Exam")',
                revert: '@Url.Action("RevertFile", "Exam")'
            }
        });

</script>
